<!DOCTYPE html>
<html>
<head>
  <title>SlickGrid Example: Editing, Validation & New Rows</title>
  <link rel="stylesheet" href="../dist/slickgrid2.css">
  <link rel="stylesheet" href="slick-default-theme.css">
  <link rel="stylesheet" href="examples.css">
  <style>
    .cell-title {
      font-weight: bold;
    }

    .cell-effort-driven {
      text-align: center;
    }
  </style>
</head>
<body>
<h2>Demonstrates:</h2>
<ul>
  <li>adding basic keyboard navigation and editing</li>
  <li>custom editors and validators</li>
</ul>
<div id="myGrid"></div>

<h2>Options:</h2>
<button onclick="grid.setOptions({autoEdit:true})">Auto-edit ON</button>
&nbsp;
<button onclick="grid.setOptions({autoEdit:false})">Auto-edit OFF</button>

<script src="../node_modules/lodash/lodash.js"></script>
<script src="../node_modules/jquery/dist/jquery.js"></script>
<script src="../node_modules/@bcherny/jquery.threedubmedia/event.drag/jquery.event.drag.js"></script>
<script src="../dist/slickgrid2.js"></script>

<!-- TODOCK: make this work -->
<script>
let grid
let data = []
const columns = [
  {
    id: 'title',
    name: 'Title',
    field: 'title',
    width: 120,
    cssClass: 'cell-title',
    editor: slickgrid2.TextEditor
  },
  {
    id: 'desc',
    name: 'Description',
    field: 'description',
    width: 100,
    editor: Slick.Editors.LongText
  },
  {
    id: 'duration',
    name: 'Duration',
    field: 'duration',
    editor: slickgrid2.TextEditor
  },
  {
    id: '%',
    name: '% Complete',
    field: 'percentComplete',
    width: 80,
    resizable: false,
    formatter: Slick.Formatters.PercentCompleteBar,
    editor: Slick.Editors.PercentComplete
  },
  {
    id: 'start',
    name: 'Start',
    field: 'start',
    minWidth: 60,
    editor: Slick.Editors.Date
  },
  {
    id: 'finish',
    name: 'Finish',
    field: 'finish',
    minWidth: 60,
    editor: Slick.Editors.Date
  },
  {
    id: 'effort-driven',
    name: 'Effort Driven',
    width: 80,
    minWidth: 20,
    maxWidth: 80,
    cssClass: 'cell-effort-driven',
    field: 'effortDriven',
    formatter: Slick.Formatters.Checkmark,
    editor: Slick.Editors.Checkbox
  }
]

$(() => {
  for (var i = 0; i < 500; i++) {
    data.push({
      title: 'Task ' + i,
      description: 'This is a sample task description.\n  It can be multiline',
      duration: '5 days',
      percentComplete: Math.round(Math.random() * 100),
      start: '01/01/2009',
      finish: '01/05/2009',
      effortDriven: i % 5 === 0
    })
  }

  grid = new Slick.Grid('#myGrid', data, columns, {
    editable: true,
    enableAddRow: true,
    enableCellNavigation: true,
    asyncEditorLoading: false,
    autoEdit: false
  })

  grid.setSelectionModel(new Slick.CellSelectionModel())

  grid.onAddNewRow.subscribe((e, args) => {
    var item = args.item
    grid.invalidateRow(data.length)
    data.push(item)
    grid.updateRowCount()
    grid.render()
  })
})
</script>
</body>
</html>
